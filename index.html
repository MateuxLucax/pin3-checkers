<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Checkers</title>
  <link rel="shortcut icon" type="image/png" href="/assets/image/favicon.png" />
  <link rel="apple-touch-icon" href="/assets/image/favicon.png" />
  <link rel="stylesheet" href="/assets/style/main.css" />
  <link rel="stylesheet" href="/assets/style/reset.css" />

  <style>
    .options-group {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: 2rem;
    }
  </style>
</head>

<body>
  <main>
    <h1>Checkers</h1>

    <form>

      <div class="options-group">
        <label for="url-pvp">
          <input type="radio" id="url-pvp" name="url" value="player-vs-player"
                 disabled/> <!-- unimplemented yet-->
          Player vs. Player
        </label>
        <label for="url-pva">
          <input type="radio" id="url-pva" name="url" value="player-vs-ai"/>
          Player vs. AI
        </label>
        <label for="url-ava">
          <input type="radio" id="url-ava" name="url" value="ai-vs-ai"
                 required/>
          AI vs. AI
        </label>
      </div>

      <div class="options-group">
        <label for="capturesMandatory">
          <input type="checkbox" id="capturesMandatory" name="capturesMandatory"/>
          Captures mandatory
        </label>
        <label for="bestCapturesMandatory">
          <input type="checkbox" id="bestCapturesMandatory" name="bestCapturesMandatory"/>
          Best captures mandatory
        </label>
      </div>

      <button type="submit" style="margin-top: 2rem; transform: scale(1.3);">
        Play
      </button>

    </form>

  </main>

  <script>
    const cap = document.querySelector('[name=capturesMandatory]')
    const bestCap = document.querySelector('[name=bestCapturesMandatory]')

    function toggleBestCapturesMandatory() {
      if (cap.checked) {
        bestCap.removeAttribute('disabled')
      } else {
        bestCap.setAttribute('disabled', '')
      }
    }

    toggleBestCapturesMandatory()
    cap.onchange = toggleBestCapturesMandatory

    const form = document.querySelector('form')

    form.onsubmit = evt => {
      evt.preventDefault()

      const url = new URL('http://' + location.host + '/' + form.url.value)
      const params = url.searchParams

      params.append('capturesMandatory', cap.checked ? 1 : 0)
      params.append('bestCapturesMandatory', bestCap.checked ? 1 : 0)

      location.assign(url)
    }
  </script>

</body>

</html>